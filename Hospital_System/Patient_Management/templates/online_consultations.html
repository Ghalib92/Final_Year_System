{% extends 'base.html' %}

{% block title %} Online Appointments {% endblock %}

{% load static %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">

{% block content %}

<div class="container-fluid bg-dark text-white rounded p-5">
    <p class="h5 text-white text-center">
        Welcome to the Coast General Hospital online diagnosis section. For basic analysis, we provide an easy and convenient chatbot.
    </p>
    <h2 class="h5 text-white text-center">
        For advanced diagnosis, consult with our chatbot service available 24/7. Read the usage instructions and start your conversation.
    </h2>
    <h4 class="h6 text-white text-center mt-2">Select one or more symptoms for quick medical recommendations:</h4>
</div>

<!-- Symptom Selection Section -->
<div class="container-fluid bg-dark p-5">
    <div class="chat-header">ğŸ©º Health Assistant</div>
    <div class="chat-body" id="chatBody">
        <div class="bot-message">ğŸ‘‹ Welcome! Select one or more symptoms below:</div>
        
        <!-- Checkbox List for Symptoms -->
        <div class="symptom-list">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Headache" id="headache">
                <label class="form-check-label text-white" for="headache">ğŸ¤• Headache</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Fever" id="fever">
                <label class="form-check-label text-white" for="fever">ğŸŒ¡ï¸ Fever</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Cough" id="cough">
                <label class="form-check-label text-white" for="cough">ğŸ¤§ Cough</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Sore Throat" id="soreThroat">
                <label class="form-check-label text-white" for="soreThroat">ğŸ˜· Sore Throat</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Stomach Pain" id="stomachPain">
                <label class="form-check-label text-white" for="stomachPain">ğŸ¤¢ Stomach Pain</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Back Pain" id="backPain">
                <label class="form-check-label text-white" for="backPain">ğŸ’¢ Back Pain</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Skin Rash" id="skinRash">
                <label class="form-check-label text-white" for="skinRash">ğŸ©¹ Skin Rash</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Cold & Flu" id="coldFlu">
                <label class="form-check-label text-white" for="coldFlu">ğŸ¤’ Cold & Flu</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Allergies" id="allergies">
                <label class="form-check-label text-white" for="allergies">ğŸ¤§ Allergies</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="First Aid" id="firstAid">
                <label class="form-check-label text-white" for="firstAid">â›‘ï¸ First Aid</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="Other" id="other">
                <label class="form-check-label text-white" for="other">ğŸ” Other</label>
            </div>
        </div>

        <!-- Textarea for Other Symptoms -->
        <div id="otherSymptomsSection" style="display: none;" class="mt-3">
            <label for="otherSymptomsInput" class="text-white">Describe your symptoms:</label>
            <textarea class="form-control" id="otherSymptomsInput" rows="3" placeholder="Type your symptoms here..."></textarea>
        </div>

        <!-- Submit Button -->
        <button class="btn btn-success mt-3" onclick="analyzeSelectedSymptoms()">Get Recommendations</button>
    </div>
</div>

<!-- Analysis Result Section -->
<div class="container-fluid bg-white p-5">
    <div class="chat-header">ğŸ“‹ Analysis Result</div>
    <div class="chat-body" id="analysisResult">
        <!-- Results will be displayed here -->
    </div>
</div>

<!-- Enhanced AI Chatbot Section -->


<div class="container-fluid bg-white py-5">
    <div class="container-fluid">
        <h2 class="text-center mb-4">Enhanced AI Chatbot for Advanced Medical Assistance</h2>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <p class="text-center">
                    While our previous chatbot provided basic medical guidance, our new AI-powered assistant goes beyond simple interactions. 
                    It is equipped with advanced natural language processing to engage in deeper medical conversations, assess symptoms more 
                    accurately, and provide preliminary diagnoses based on user inputs. With improved learning algorithms, this chatbot can 
                    offer personalized recommendations and guide users toward appropriate healthcare solutions with greater precision.
                </p>
            </div>
        </div>
    </div>
</div>




<div class="container-fluid bg-dark py-5">
<div class="container-fluid">
    <h2 class="text-center mb-4">How Our AI Chatbot Works</h2>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <p class="text-center">
                Our AI-powered chatbot is designed to assist you with instant medical advice, symptom checking, 
                and general healthcare inquiries. It helps patients make informed decisions before consulting 
                a doctor.
            </p>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-md-4 d-flex">
            <div class="card shadow p-4 w-100">
                <h4 class="text-primary">1. Start a Chat</h4>
                <p>Click the "Chat with AI Doctor" button to begin your conversation. The chatbot is available 24/7.</p>
            </div>
        </div>

        <div class="col-md-4 d-flex">
            <div class="card shadow p-4 w-100">
                <h4 class="text-primary">2. Ask Your Question</h4>
                <p>Describe your symptoms or health concerns, and the chatbot will provide instant guidance based on medical databases.</p>
            </div>
        </div>

        <div class="col-md-4 d-flex">
            <div class="card shadow p-4 w-100">
                <h4 class="text-primary">3. Get Recommendations</h4>
                <p>The chatbot will suggest possible conditions, first aid steps, and whether you need to consult a human doctor.</p>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-4 d-flex">
            <div class="card shadow p-4 w-100">
                <h4 class="text-primary">4. Book a Doctor</h4>
                <p>If necessary, the chatbot will guide you to schedule an appointment with a licensed doctor for further assistance.</p>
            </div>
        </div>

        <div class="col-md-4 d-flex">
            <div class="card shadow p-4 w-100">
                <h4 class="text-primary">5. Receive Ongoing Support</h4>
                <p>Track past conversations and get follow-up health tips based on your consultation history.</p>
            </div>
        </div>

        <div class="col-md-4 d-flex">
            <div class="card shadow p-4 w-100 text-center">
                <h4 class="text-primary">ğŸš€ Try It Now!</h4>
                <p>Start chatting with our AI Doctor and get immediate health assistance.</p>
                <a href="/chatbot/chatbot-page" class="btn btn-success mt-2">Start Chat</a>
            </div>
        </div>
    </div>
</div>
</div>











<div class="container-fluid">
    <div class="options">
       <button class="option" onclick="selectAI()">Chat with AI Doctor</button>
               </div>
 



 

<script>
    // Show/hide the "Other" textarea
    document.getElementById('other').addEventListener('change', function() {
        const otherSection = document.getElementById('otherSymptomsSection');
        otherSection.style.display = this.checked ? 'block' : 'none';
    });

    function analyzeSelectedSymptoms() {
        const checkboxes = document.querySelectorAll('.form-check-input:checked');
        const otherSymptoms = document.getElementById('otherSymptomsInput').value.trim();
        let analysisResult = "";

        if (checkboxes.length === 0 && otherSymptoms === "") {
            analysisResult = "ğŸ©º Please select at least one symptom or describe your symptoms to get recommendations.";
        } else {
            // Combine recommendations for selected symptoms
            let combinedRecommendations = [];
            checkboxes.forEach(checkbox => {
                if (checkbox.value !== "Other") {
                    combinedRecommendations.push(getRecommendation(checkbox.value));
                }
            });

            // Analyze "Other" symptoms if provided
            if (otherSymptoms !== "") {
                combinedRecommendations.push(analyzeOtherSymptoms(otherSymptoms));
            }

            analysisResult = combinedRecommendations.join(" ") + "<br><br>";

            // Add additional options
            analysisResult += `
                <strong>Additional Options:</strong><br>
                - If symptoms persist or worsen, consult a doctor immediately.<br>
                - For advanced analysis, try our <a href="/chatbot/chatbot-page" style="color: #4caf50;">AI-powered chatbot</a>.
            `;
        }

        document.getElementById('analysisResult').innerHTML = analysisResult;
    }

    function getRecommendation(symptom) {
        const recommendations = {
            "Headache": "ğŸ¤• For headaches, drink plenty of water, rest in a dark room, and consider taking a pain reliever like paracetamol. ",
            "Fever": "ğŸŒ¡ï¸ For fever, stay hydrated, rest, and take fever-reducing medication like ibuprofen. If the fever persists, consult a doctor. ",
            "Cough": "ğŸ¤§ For cough, drink warm fluids like tea with honey, use a humidifier, and avoid irritants like smoke. ",
            "Sore Throat": "ğŸ˜· For sore throat, gargle with warm salt water, drink warm liquids, and avoid cold or acidic foods. ",
            "Stomach Pain": "ğŸ¤¢ For stomach pain, avoid spicy or fatty foods, drink peppermint tea, and rest. If pain persists, seek medical attention. ",
            "Back Pain": "ğŸ’¢ For back pain, apply a warm compress, do gentle stretches, and avoid heavy lifting. ",
            "Skin Rash": "ğŸ©¹ For skin rash, avoid scratching, apply a soothing lotion like calamine, and keep the area clean and dry. ",
            "Cold & Flu": "ğŸ¤’ For cold and flu, rest, drink plenty of fluids, and take over-the-counter cold medication. ",
            "Allergies": "ğŸ¤§ For allergies, avoid allergens, take antihistamines, and use a saline nasal spray. ",
            "First Aid": "â›‘ï¸ For first aid, clean the wound with water, apply an antiseptic, and cover it with a sterile bandage. "
        };

        return recommendations[symptom] || "";
    }

    function analyzeOtherSymptoms(input) {
        // Database of 100+ symptoms and their analyses
        const symptomDatabase ={
            "fatigue": "ğŸ˜´ For fatigue, ensure you're getting enough sleep, eat a balanced diet, and stay hydrated. If fatigue persists, consult a doctor.",
            "dizziness": "ğŸŒ€ For dizziness, sit or lie down immediately, drink water, and avoid sudden movements. If it persists, seek medical attention.",
            "nausea": "ğŸ¤¢ For nausea, sip ginger tea, avoid strong odors, and eat small, bland meals. If nausea persists, consult a doctor.",
            "chest pain": "ğŸ«€ For chest pain, seek emergency medical attention immediately as it could indicate a serious condition.",
            "shortness of breath": "ğŸŒ¬ï¸ For shortness of breath, sit upright, try to relax, and seek medical attention if it worsens.",
            "joint pain": "ğŸ¦µ For joint pain, apply a warm compress, rest the affected area, and consider taking anti-inflammatory medication.",
            "muscle cramps": "ğŸ’ª For muscle cramps, stretch gently, massage the area, and stay hydrated.",
            "blurred vision": "ğŸ‘ï¸ For blurred vision, rest your eyes, avoid screens, and consult an eye doctor if it persists.",
            "ear pain": "ğŸ‘‚ For ear pain, apply a warm compress and avoid inserting objects into the ear. Consult a doctor if pain persists.",
            "toothache": "ğŸ¦· For toothache, rinse your mouth with warm salt water and see a dentist as soon as possible.",
            "headache": "ğŸ¤¯ For a headache, rest in a quiet, dark room, stay hydrated, and take a pain reliever if necessary.",
            "fever": "ğŸŒ¡ï¸ For fever, stay hydrated, rest, and take fever-reducing medication if needed. Seek medical help if it gets too high.",
            "cough": "ğŸ¤§ For a cough, drink warm fluids, use a humidifier, and suck on throat lozenges.",
            "sore throat": "ğŸ”¥ For a sore throat, gargle warm salt water, drink herbal tea, and use throat lozenges.",
            "stuffy nose": "ğŸ‘ƒ For a stuffy nose, use a saline spray, inhale steam, and drink warm fluids.",
            "runny nose": "ğŸ’¦ For a runny nose, blow your nose gently, use antihistamines, and stay hydrated.",
            "sneezing": "ğŸ¤§ For sneezing, avoid allergens, keep your environment clean, and consider antihistamines.",
            "constipation": "ğŸš½ For constipation, eat more fiber, drink plenty of water, and exercise regularly.",
            "diarrhea": "ğŸ’© For diarrhea, stay hydrated, eat a BRAT diet (bananas, rice, applesauce, toast), and avoid dairy.",
            "stomach pain": "ğŸ¤• For stomach pain, rest, drink herbal tea, and avoid spicy or greasy foods.",
            "bloating": "ğŸˆ For bloating, avoid carbonated drinks, eat slowly, and take probiotics.",
            "acid reflux": "ğŸ”¥ For acid reflux, avoid spicy foods, eat smaller meals, and sleep with your head elevated.",
            "heartburn": "ğŸ’” For heartburn, chew gum, avoid lying down after eating, and take antacids if needed.",
            "hiccups": "ğŸ˜† For hiccups, hold your breath, drink a glass of water, or swallow a teaspoon of sugar.",
            "gas": "ğŸ’¨ For gas, avoid gas-producing foods, drink peppermint tea, and do light exercise.",
            "indigestion": "ğŸ” For indigestion, eat smaller meals, avoid fatty foods, and drink chamomile tea.",
            "loss of appetite": "ğŸ½ï¸ For loss of appetite, eat small, nutritious meals and try gentle exercise to stimulate hunger.",
            "weight loss": "âš–ï¸ For unexplained weight loss, eat nutrient-rich foods and consult a doctor if it persists.",
            "weight gain": "ğŸ“ˆ For unexpected weight gain, monitor your diet, stay active, and check for hormonal imbalances.",
            "back pain": "ğŸ¦´ For back pain, apply a warm or cold compress, practice good posture, and stretch regularly.",
            "neck pain": "ğŸ’†â€â™‚ï¸ For neck pain, gently stretch, apply a warm compress, and avoid straining your neck.",
            "shoulder pain": "ğŸ«‚ For shoulder pain, avoid heavy lifting, do gentle stretches, and use ice or heat therapy.",
            "knee pain": "ğŸƒâ€â™‚ï¸ For knee pain, rest, apply ice, and elevate your leg.",
            "ankle pain": "ğŸ¦¶ For ankle pain, avoid walking too much, apply ice, and keep your foot elevated.",
            "heel pain": "ğŸ‘Ÿ For heel pain, wear supportive shoes, stretch your feet, and use ice therapy.",
            "hand pain": "âœ‹ For hand pain, do gentle exercises, take breaks from repetitive tasks, and use ice packs if needed.",
            "wrist pain": "âŒš For wrist pain, rest your wrist, wear a brace, and do wrist stretches.",
            "finger pain": "ğŸ–ï¸ For finger pain, avoid overuse, apply ice, and massage the affected area.",
            "tingling hands": "ğŸ–– For tingling hands, stretch your fingers, improve posture, and avoid prolonged pressure on your wrists.",
            "tingling feet": "ğŸ¦¶ For tingling feet, move around, massage your feet, and avoid tight footwear.",
            "cold hands": "ğŸ§¤ For cold hands, keep warm, massage your fingers, and improve circulation by moving around.",
            "cold feet": "ğŸ§¦ For cold feet, wear warm socks, keep moving, and avoid smoking.",
            "sweating excessively": "ğŸ’¦ For excessive sweating, stay hydrated, wear breathable fabrics, and use antiperspirants.",
            "chills": "ğŸ¥¶ For chills, wrap yourself in a warm blanket, drink hot beverages, and rest.",
            "night sweats": "ğŸ˜“ For night sweats, keep your room cool, wear breathable pajamas, and check for underlying conditions.",
            "dry skin": "ğŸŒµ For dry skin, moisturize daily, drink plenty of water, and avoid hot showers.",
            "itchy skin": "ğŸ–ï¸ For itchy skin, apply soothing lotion, avoid scratching, and use antihistamines if needed.",
            "rashes": "ğŸŒ¿ For rashes, avoid irritants, apply aloe vera, and keep the skin clean and dry.",
            "hives": "ğŸ¯ For hives, take antihistamines, apply a cold compress, and avoid known allergens.",
            "bruising easily": "ğŸ©¹ For easy bruising, eat vitamin C-rich foods, be gentle with your skin, and avoid blood thinners.",
            "cuts and scrapes": "ğŸ©¸ For cuts and scrapes, clean with antiseptic, apply a bandage, and keep it covered.",
            "burns": "ğŸ”¥ For burns, run cool water over the area, apply aloe vera, and keep it clean.",
            "sunburn": "â˜€ï¸ For sunburn, apply aloe vera, drink water, and avoid further sun exposure.",
            "frostbite": "â„ï¸ For frostbite, gently warm the affected area and avoid direct heat.",
            "dehydration": "ğŸ’§ For dehydration, drink plenty of water and avoid alcohol or caffeine.",
            "insomnia": "ğŸŒ™ For insomnia, maintain a bedtime routine, avoid screens before bed, and try relaxation techniques.",
            "anxiety": "ğŸ§˜â€â™‚ï¸ For anxiety, practice deep breathing, meditate, and engage in physical activity.",
            "depression": "ğŸ˜” For depression, talk to someone, stay active, and seek professional help if needed.",
            "stress": "ğŸ§‘â€ğŸ’¼ For stress, practice relaxation techniques, exercise, and take breaks from work.",
            "memory loss": "ğŸ§  For memory loss, stay mentally active, eat brain-healthy foods, and get enough sleep."
        }
        

        // Match input with symptom database
        for (const [symptom, analysis] of Object.entries(symptomDatabase)) {
            if (input.toLowerCase().includes(symptom)) {
                return analysis;
            }
        }

        return "ğŸ©º We couldnâ€™t identify your symptoms. Please try our more advanced chatbot option below or visit our hospital for more info by booking an appointment.";
    }
</script>

{% endblock %}